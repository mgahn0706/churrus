// Next.js API route support: https://nextjs.org/docs/api-routes/introduction
import type { NextApiRequest, NextApiResponse } from "next";

export interface ClueData {
  id: number;
  text: string;
  from: string;
}

const schoolKeywordIds: Record<string, number[]> = {
  시체: [1, 2],
  이마: [2, 7],
  목: [3, 4],
  교살: [4],
  유서: [5, 6],
  얼굴: [3, 8, 9],
  입: [9],
  수면제: [10, 11, 12, 13],
  졸피뎀: [10, 13, 14],
  클로로포름: [8, 15, 16, 17, 18],
};

export const schoolClues: ClueData[] = [
  {
    id: 1,
    text: "시체는 3-1반 본인의 자리에서 유서와 함께 엎드린채 발견되었어요. 얼굴을 파묻은채로요. 목에도 어떤 흔적이 있었어요.",
    from: "조수",
  },
  {
    id: 2,
    text: "시체의 이마에 무언가 상처같은게 있었죠. 생각보다 컸죠. 왜 병원에 가지 않았을까요?",
    from: "조수",
  },
  {
    id: 3,
    text: "시체의 목에는 연속되고 얇은 끈 모양의 흔적이 있었어요. 무언가에 졸린 느낌이었죠.",
    from: "조수",
  },
  {
    id: 4,
    text: "보통 목을 졸리면 저항흔이 남기 마련이에요. 하지만, 이 친구에겐 그게 없군요.",
    from: "의사",
  },
  {
    id: 5,
    text: "유서의 위치요? 시체의 팔 위에 올려져있었어요.",
    from: "조수",
  },
  {
    id: 6,
    text: "유서는 프린팅되어있었습니다. 흔하진 않죠. 보통은 자필로 쓰는데요. 내용은 '너무 힘들다' 정도의 얘기였습니다.",
    from: "경찰",
  },
  {
    id: 7,
    text: "시체의 이마에는 어딘가 모서리에 부딪힌 흔적이 있네요. 이정도 상처면 기절할 정도는 아니지만 그래도 꽤 세게 부딪힌 겁니다.",
    from: "의사",
  },
  {
    id: 8,
    text: "시체의 얼굴 전체에서 클로로포름이 검출되었어요. 마취제로 쓰이죠.",
    from: "의사",
  },
  {
    id: 9,
    text: "시체의 입 안에는 알약 8~9개가 들어있었어요. 수면제로 보였어요. 보통 수면제를 먹고 자살하잖아요?",
    from: "조수",
  },
  {
    id: 10,
    text: "이 수면제는 '졸피뎀'입니다. 이걸 다량으로 먹으려고 한 걸로 추정되네요.",
    from: "경찰",
  },
  {
    id: 11,
    text: "저 수면제 원래 먹고 있었어요. 한 8월 초부터? 슬픈 일이 있어서 잠이 안오는데 어떡해요.",
    from: "3-2 유지현",
  },
  {
    id: 12,
    text: "수면제라면 민혜도 먹고 있는 걸로 알아요. 요즘 스트레스가 엄청 많아보였죠. 매일 피곤해하고. 특히 최근 2주간은 더 심했어요.",
    from: "3-1 김남주",
  },
  {
    id: 13,
    text: "아, 졸피뎀이 수면제인가요? 다 비워져있는 졸피뎀이 3-1반 휴지통에서 발견되었어요. 내용물은 없었죠.",
    from: "조수",
  },
  {
    id: 14,
    text: "졸피뎀 처방받은 기록이 있는 학생은 손민혜와 유지현 두 분이십니다.",
    from: "의사",
  },
  {
    id: 15,
    text: "클로로포름은 마취제로써 사람을 쉽게 기절시킬 수 있습니다. 수십초만에 의식을 잃게 되죠.",
    from: "의사",
  },
  {
    id: 16,
    text: "클로로포름은 플라스틱을 녹여서 전용 용기에 보관해야해요. 웬만한 용기는 다 녹여서 따로 보관해야죠.",
    from: "생명과학 교사",
  },
  {
    id: 17,
    text: "DNA 추출 실험에 클로로포름이 쓰여요. 엽록소를 파괴해주거든요. 아마 생명 동아리 활동에 쓰일겁니다.",
    from: "생명과학 교사",
  },
  {
    id: 18,
    text: "클로로포름은 아마 생명실에만 있을텐데요. 실험장에서 보관하고 있어요.",
    from: "생명과학 교사",
  },
  {
    id: 19,
    text: "실험장 열쇠는 시체의 바지 주머니에서 발견되었어요. 열쇠 고리쪽에 유리 조각이 살짝 묻어있었죠.",
    from: "조수",
  },
  {
    id: 20,
    text: "실험장을 열어보니, 안쪽 선반에 희미한 붉은색 자국이 묻어있네요. 이거, 피 아닌가요 피?",
    from: "조수",
  },
  {
    id: 21,
    text: "실험장 안에는 클로로포름 2병이 있어요. 하나는 비어있고, 하나는 아직 남아있네요.",
    from: "조수",
  },
  {
    id: 22,
    text: "생명실이에요. 3-1반 교실 맞은편에 있죠. 특이한 점으로는 새로 사온듯한 전지가 놓여있었습니다.",
    from: "조수",
  },
  {
    id: 23,
    text: "수건이 놓여있었어요. 나머지는 다 말라있었는데 하나만 축축하더라구요.",
    from: "조수",
  },
  {
    id: 24,
    text: "생명실에 원래 수건이 있죠. 실험하다보면 닦을게 많거든요.",
    from: "생명과학 교사",
  },
  {
    id: 25,
    text: "실험장 열쇠는 오늘 내내 여기 교무실에 있었어요. 7시쯤인가 현성이가 가져갔죠.",
    from: "생명과학 교사",
  },
  {
    id: 26,
    text: "생명실 실험장을 열 수 있는 열쇠는 2개에요. 실험장열쇠와 마스터키. 둘 다 교무실에서 보관 중이죠.",
    from: "화학 교사",
  },
  {
    id: 27,
    text: "마스터키로는 모든 문이나 자물쇠를 열 수 있어요. 신문을 인쇄할 때나 실험장을 열 때 자주 빌려가는 것 같아요.",
    from: "화학 교사",
  },
  {
    id: 28,
    text: "오늘 마스터키는 손민혜가 점심시간에 빌려갔었죠. 점심시간이 끝날 때 쯤 돌려주더라구요.",
    from: "화학 교사",
  },
  {
    id: 29,
    text: "현태민 학생은 시체 발견 당시 마스터키를 소지하고 있었어요. 저녁 7시에 말도 없이 빌려간 것으로 밝혀졌죠.",
    from: "조수",
  },
  {
    id: 30,
    text: "생명실 실험장의 유리? 저거 왜 깨져있지? 유리창 아래쪽이 무언가에 의해 깨져있네요. 이거 옆의 실험장 때문에 깨진 것 같긴 한데, 구조상 아무리 세게 열어도 실험장 문으로 옆의 유리가 깨질 수 없어요. 뭔가 이상해요.",
    from: "경비",
  },
  {
    id: 31,
    text: "실험장 유리창은 어제까지 멀쩡했어요. 오늘 아침에도 멀쩡했는데 말이죠. 깨져있는걸 제가 알았다면 바로 수리기사님께 얘기 드렸겠죠.",
    from: "생명과학 교사",
  },
  {
    id: 32,
    text: "생명실 약품 구입 기록지에 매월 1일 약품이 새로 준비된다고 적혀있었어요. 클로로포름도 9월 1일 오늘 아침, 2병이 들어왔다고 적혀있았죠.",
    from: "조수",
  },
  {
    id: 33,
    text: "야간 자율학습, 즉 야자시간에는 모든 3학년 학생들이 2층 자습실로 이동합니다. 동아리 준비하는 것 빼고는, 3층에 올라갈 일이 없죠.",
    from: "3-2 최시현",
  },
  {
    id: 34,
    text: "야자 시작은 저녁을 먹고난 뒤인 7시부터에요. 시작할때는 휴대폰을 다 걷고 있습니다.",
    from: "주임 선생님",
  },
  {
    id: 35,
    text: "제 휴대폰은 야자 시작할 때 제출했어요. 여기, 보관함에 있네요! 보셨죠?",
    from: "3-2 현태민",
  },
  {
    id: 36,
    text: "휴대폰 보관함에는 유지현과 현태민의 휴대전화가 보관되어있어요. 손민혜꺼는 없었죠.",
    from: "조수",
  },
  {
    id: 37,
    text: "자습실 출입 기록이라, 여깄네요. 현태민 7시에 휴대폰 내고 바로 나갔다가 45분에 들어왔고요. 8시 10분에 한번 더 나갔네요.",
    from: "주임 선생님",
  },
  {
    id: 38,
    text: "민헤 오늘 자습실에 좀 늦게 들어왔어요. 한 8시? 8시 18분쯤에 물 마시러간다고 나갔는데, 갑자기 비명소리가 들리더니...",
    from: "3-3 신수현",
  },
  {
    id: 39,
    text: "지현이는 자습실에서 공부하다가 8시쯤에 나갔어요. 15분 쯤 뒤에 다시 들어왔는데...뭔가 표정이 안 좋더라구요.",
    from: "3-1 김남주",
  },
  {
    id: 40,
    text: "이거요? 의료용 고무줄이에요. 제 가방에 항상 들고다녀요. 제가 몸이 좀 안좋아서...",
    from: "3-1 손민혜",
  },
  {
    id: 41,
    text: "손민혜 학생의 가방에서 발견된 이 의료용 고무줄, 많이 사용한 흔적이 있어요. 완전 늘어져있고요. 이걸로 죽였나?",
    from: "조수",
  },
  {
    id: 42,
    text: "제가 민혜 스마트폰을 몰래 봤는데, 글쎄 누구랑 험하게 카톡하는 내용을 봤어요. 급식 지원을 끊겠다니 뭐니 하는 내용이었어요. 아, 제가 보려고 본 건 아닙니다~ 그냥... 보였어요.",
    from: "3-1 구상혁",
  },
  {
    id: 43,
    text: "화학실에는 여러 화학기구들이 있어요. 특이점이라고는 약품들 보관을 위해 냉동창고가 있다는 점입니다.",
    from: "화학 교사",
  },
  {
    id: 44,
    text: "냉동창고에 별다른 건 없어요. 현성이가 가끔 알 수 없는 이유로 들어가곤 했었지만요. 창고엔 여러 화학약품과 기구들이 널브러져있네요. 여기 아이스팩도 떨어져있고.",
    from: "화학 교사",
  },
  {
    id: 45,
    text: "도시락 전달 봉사할 때 민혜는 음식이 상하면 안된다면서 꼭 아이스팩을 넣었었죠.",
    from: "화학 교사",
  },
  {
    id: 46,
    text: "도시락 봉사는 매주 월요일 하교 후 동네 사람들 중에서 신청한 사람들에게 도시락을 배달해주는 활동입니다. 현성이도 하고 있었죠.",
    from: "3-1 이수민",
  },
  {
    id: 47,
    text: "손민혜의 가방에는 고무줄과 화학노트 정도만 있었어요. 뭐가 더 있었나?",
    from: "조수",
  },
  {
    id: 48,
    text: "이게 손민혜 학생의 화학 노트인가요? NPP, 4-ANPP, 이게 다 뭐죠? 이런건 가르친 적이 없는데.",
    from: "화학 교사",
  },
  {
    id: 49,
    text: "NPP, 4-ANPP는, 화학 실험 동아리에서 만드는 물질이에요. 전 오늘 이걸 화학실에서 준비하다가 8시쯤 자습실에 돌아온거구요.",
    from: "3-1 손민혜",
  },
  {
    id: 50,
    text: "3-1 휴지통에는 '졸피뎀'이라고 쓰여있는 빈 약통과 따지 않은 오렌지주스 페트병이 있었어요. 누가 아깝게 이걸 버린거지?",
    from: "조수",
  },
  {
    id: 51,
    text: "휴지통은 매일 석식 먹기 전 6시쯤에 역할 분담제에 따라 비워요. 분명 오늘도 다 비웠는데...",
    from: "3-1 이수민",
  },
  {
    id: 52,
    text: "이거 우리 매점에서 파는 오렌지주스네! 오늘 아침에 유지현? 그 친구가 사갔어요. 여기, 영수증도 있죠.",
    from: "매점 주인",
  },
  {
    id: 53,
    text: "오렌지주스 페트병에 작은 구멍이 뚫려있고, 테이프로 막아놨어요. 뭔가 집어넣은 것 같아요",
    from: "조수",
  },
  {
    id: 54,
    text: "십자말풀이라면, 위클리와부에 매주 들어가는 퍼즐 말씀하시는 것 같네요. 그건 위클리와부 기장인 현태민이 매주 문제를 내는거에요. 걔 원래 그런거 만드는거에 미쳐있어요. 이거, 걔한테 얘기하면 안돼요!",
    from: "3-2 구현석",
  },
  {
    id: 55,
    text: "박현성의 가방에는 여러 물건들이 많았어요. 특이한 점이라고는 한 장이 찢긴 노트정도? 아, 락픽과 스패너 같이 이상한 공구도 같이 들어있었어요. 수상하죠?",
    from: "조수",
  },
  {
    id: 56,
    text: "태민이의 외숙모는 학교 근처에서 학원을 하셔요. SA학원이라고, 저희 학교 학생들도 많이 다녀요.",
    from: "3-2 정현우",
  },
  {
    id: 57,
    text: "제가 드릴 자료는 다 드린 것 같아요. 가족관계라도 알려드려야 하나?",
    from: "3-1 담임 선생님",
  },
  {
    id: 58,
    text: "태민 학생에게는 외숙모가 계신다고 알고 있어요. 같이 살지는 않고, 근처에서 학원하시는 것 같던데요. 그 분 성함이요? 성민아, 성민아십니다.",
    from: "3-2 담임 선생님",
  },
  {
    id: 59,
    text: "아, 성민아 선생님이요? 저희 학원 원장님이셨는데, 최근에 돌아가셨어요. 좋으신 분이었는데.",
    from: "3-3 김민지",
  },
  {
    id: 60,
    text: "성민아씨의 사인은 질식사였습니다. 약물 과다 복용으로 추정되고요. 더 이상은 얘기해드릴 수 없네요.",
    from: "경찰",
  },
  {
    id: 61,
    text: "SA학원은 학교 바로 앞 빌딩에 있어요. 거기 보안이 되게 철저해서 그 학원 학생이 아니면 들어가지도 못해요. 하여튼 이상해요. 얼마나 대단한거 한다고...",
    from: "3-2 박서준",
  },
];

interface ClueApiRequest extends NextApiRequest {
  query: {
    keyword: string;
  };
}

export default function handler(
  req: ClueApiRequest,
  res: NextApiResponse<ClueData[] | null>
) {
  if (schoolKeywordIds[req.query.keyword] === undefined) {
    res.status(200).json(null);
    return;
  }
  res
    .status(200)
    .json(schoolKeywordIds[req.query.keyword].map((id) => schoolClues[id - 1]));
}
